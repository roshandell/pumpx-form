pl.mintTo(connection, signer, mintPk, ata.address, new PublicKey(wallet), amount);

      const cluster = network==="devnet" ? "devnet" : "";
      const mintUrl = `https://explorer.solana.com/address/${mintPk.toBase58()}?cluster=${cluster}`;
      const txUrl = `https://explorer.solana.com/tx/${sig}?cluster=${cluster}`;
      out.style.display="block";
      out.innerHTML = `
        <div><b>Mint:</b> <div class="code">${mintPk.toBase58()}</div></div>
        <div class="row">
          <a class="code" target="_blank" href="${mintUrl}" style="flex:1;text-align:center">Explorer</a>
          <a class="code" target="_blank" href="${txUrl}" style="flex:1;text-align:center">Transaction</a>
        </div>`;
      status.textContent = "تمام شد ✅";
    } catch (e) {
      console.error(e);
      status.textContent = "خطا: " + (e?.message||e);
    }
  };

  // پاک‌سازی سرویس‌ورکر/کش قدیمی (در صورت وجود)
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.getRegistrations().then(rs => rs.forEach(r => r.unregister()));
    if (window.caches) caches.keys().then(keys => keys.forEach(k => caches.delete(k)));
  }
})();
</script>
</body>
</html>
